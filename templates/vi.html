{% include 'header.html' %}
<input type="hidden" value="1" name="page" />
<div class="container">
        <form action="/vi/search_results" method="post">
            <div class="input-group">
                <input type="hidden" value="1" name="page" />
                <input type="hidden" value="{{content_text}}" name="content_text" />
                <input type="text" class="form-control input-lg" name="input" placeholder="Nhập từ khóa ...."  value="{%if(keywords)%}{{keywords}}{%endif%}" autofocus>
                <div class="input-group-btn">
                    <button class="btn btn-primary btn-lg" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                </div>
            </div>
        </form>
        <table class="table" style="height: 400px" id="documentTable">
            <thead>
            {% for doc in docs %}
                <tr>
                    <td class="content-text">
                        <h3><strong>{{ doc["title"] }}</strong></h3>
                        <h4><em>{{ doc["datetime"] }}</em></h4>
                    </td>
                </tr>
            {% endfor %}
            </thead>
        </table>

        <nav>
        {% if(totals) %}
            <form id="paging" method="post" action="/vi/page">
                <!--<input type="hidden" name="input" value="{%if(keywords)%}{{keywords}}{%endif%}" />-->
                <ul class="pagination">
                {% if(keywords) %}
                    {% for i in range (1, totals) %}
                        <li class="page-item"><a class="page-link" href="/vi/search_results/page/{{i}}" >{{ i }}</a></li>
                    {% endfor %}
                {% else %}
                    {% for i in range (1, totals) %}
                        <li class="page-item"><a class="page-link" href="/vi/page/{{i}}" >{{ i }}</a></li>
                    {% endfor %}
                {% endif %}
                </ul>
            </form>
        {% endif %}
        </nav>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        $(document).on("dblclick","#documentTable tr",function() {
            var documentname = $(this).find("h3").eq(0).children("strong").text();
            console.log("Document name: " + documentname);
            if(typeof documentname == 'undefined' || documentname == ''){
              return;
            }

            // params = {};
            // params["reference"] = reference;
            // params["content"] = content_text;

            // var url = "/editor/edit?reference=+%2B+reference+%2B+&amp;content=+%2B+content_text+%2B+";
            var url = "/vi/showdoc";
            url = url + "?documentname=" + documentname;
            window.location.href = url;
            // window.location.href = url;
            // $.ajax({
            //      cache: false,
            //      contentType: "application/json",
            //      type: 'POST',
            //      url: '/editor/edit',
            //      data: JSON.stringify(params),
            //      async: false,
            //      success: function(recvData) {
            //        console.log("Success");
            //      },
            //      error: function(XMLHttpRequest, textStatus, errorThrown) {
            //         alert("textStatus: " + textStatus + "\n errorThrown: " + errorThrown);
            //      }
            // });

      });
    });
</script>
{% include 'footer.html' %}